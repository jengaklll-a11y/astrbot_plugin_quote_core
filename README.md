# 语录(Core)

一个功能强大的 AstrBot 语录插件，支持 HTML 卡片渲染、多群隔离、长图合集生成以及戳一戳互动。

## ✨ 功能特性

- **精美渲染**：使用 HTML + CSS 渲染语录卡片，支持朋友圈风格和宽幅卡片风格，自动适配文本长度。
- **长图合集**：支持一次性抽取多条语录（“十连抽”），生成包含头像和名字的长图合集。
- **多维收录**：通过回复消息即可快速收录，自动记录发送者、内容和时间。
- **灵活配置**：支持多群隔离或跨群共享（Global Mode），支持“戳一戳”触发，支持无视指令前缀。

## 📖 指令列表

假设您的 Bot 指令前缀为 `/`：

### 1. 收录语录
> **注意**：Core 版本通过**回复消息**来抓取内容，暂不支持直接输入文本收录。

- **指令**：回复某条消息发送 `/上传` 或 `/添加语录`
- **效果**：插件会自动提取被回复消息的纯文本内容、发送者昵称和 QQ 号并保存。

### 2. 随机语录 (抽卡)
- **`/语录`**
  随机发送一条语录卡片。
- **`/语录 自己`**
  发送一条自己语录的卡片。
- **`/语录 @某人`**
  随机发送一条该用户的语录。
- **`/语录 5`**
  随机抽取本群（或全局）的 5 条语录，生成一张长图合集（类似抽卡结果）。
- **`/语录 10 @某人`**
  随机抽取该用户的 10 条语录，生成个人语录合集长图。

### 3. 删除语录
- **指令**：回复 Bot 刚才发送的语录卡片消息，发送 `/删除`
- **限制**：只能删除 Bot 最近一次发送的语录。
- **权限**：默认全员可删，可在配置中开启“仅管理员可用”。

### 4. 戳一戳触发
- **操作**：双击（戳一戳）Bot 的头像。
- **效果**：随机发送一条语录（需在配置中开启）。

---

## ⚙️ 配置说明

安装插件后，请在 AstrBot 管理面板的插件配置中修改，或直接编辑配置：

| 配置项 | 类型 | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `poke_mode` | string | `仅戳Bot` | 戳一戳响应模式。可选：`关闭`、`仅戳Bot`、`任意戳`（群内任意戳一戳事件都触发）。 |
| `poke_cooldown` | int | `10` | 戳一戳触发的冷却时间（秒），防止刷屏。 |
| `max_batch_count` | int | `10` | 单次生成长图合集的最大条数限制。 |
| `global_mode` | bool | `false` | **跨群模式**。<br>开启后，随机语录将从所有群的数据中抽取（共享语录库）；<br>关闭后，仅随机当前群收录的语录。 |
| `ignore_prefix` | bool | `false` | **无视前缀**。<br>开启后，直接发送“语录”、“上传”等关键词即可触发，无需加 `/` 前缀。 |
| `admin_only` | bool | `false` | 是否仅允许管理员（群主/管理员）执行删除操作。 |

## 📂 数据存储

- 数据文件位于：`data/plugin_data/quotes/quotes.json`
- 图片渲染：实时生成，不占用本地磁盘空间。

## 📦 依赖

本插件仅使用 Python 标准库和 AstrBot API，**无需**安装额外的 pip 依赖。
